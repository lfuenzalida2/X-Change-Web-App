<div>
  <% if (locals.errors) { %>
    <div class="errors">
      You need to fix the following errors:
      <ul>
        <% locals.errors.forEach(error => { %>
          <li><%= error.message %></li>
        <% }); %>
      </ul>
    </div>
  <% } %>
  <form action="<%= submitObjectPath %>" enctype="multipart/form-data" method="post">
    <div class="field">
      <label for="list">Select file</label>
      <input type="file" name="list" />
    </div>
    <div class="field">
      <input type="submit" name="upload" value="Upload" />
    </div>
  </form>
</div>

<h2>Fotos!</h2>
<div class="flex-container">
    <div class="flexbox-item border">
        <% if (!photos.length) { %>
          <p>No hay fotos de este objeto aún</p>
        <% } else { %>
            <% photos.forEach((photo) => { %>
              <img src=<%=`https://storage.cloud.google.com/xchange_storage/${photo.fileName}`%>>
              <br>
            <% }) %>
        <% } %>
    </div>
    <div class="flexbox-item">
        <div class="flex-container">
            <div class="flexbox-item">
                <h1><%= object.name %></h1>
            </div>
            <div class="flexbox-item">
                <%= object.state %>
            </div>
            <div class="flexbox-item">
                <%= object.userId %>
            </div>
            <div class="flexbox-item">
                <%= object.categoryId %>
            </div>
            <div class="flexbox-item">
                <%= object.description %>
            </div>
        </div>
    </div>
</div>
<% if (currentUser) {%>
    <% if (currentUser.id !== object.userId) { %>
        <form action="<%= createNegotiation  %>" method="POST">
            <input type="hidden" name="customerId" value=<%= object.userId %>>
            <input type="hidden" name="state" value="In Progress">
            <input type="hidden" name="sellerId" value=<%= currentUser.id %>>
            <input type="submit" value="Crear negociación" />
        </form>
    <% } %>
<% } %>
